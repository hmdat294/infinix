<header
    class="layout-horizontal in-mobile-layout-vertical w-fill gap-20 align-center-center layer-default px-10 py-5 in-mobile-gap-5 in-mobile-py-10">
    <div class="w-fill-column-8 layout-horizontal in-mobile-w-fill">
        <div class="w-fill hide-in-mobile hide-in-tablet">
            <img src="assets/image/Logo.png" alt="">
        </div>
        <div class="w-fill layout gap-20 in-mobile-gap-10">
            <div class="w-hug show-in-mobile show-in-tablet">
                <img src="assets/image/Logo.png" alt="">
            </div>
            <div class="search-dropdown-control w-fill">

                <div class="control search-control">
                    <input class="rounded-2" (keydown)="gotoSearch($event, keyword)" type="search" name="search"
                        [(ngModel)]="keyword" placeholder="Tìm kiếm" spellcheck="false" required>
                    <button type="button" class="input-button clear-content-button" (click)="clearSearch()">
                        <i class="icon-size-16 icon icon-ic_fluent_dismiss_16_regular"></i>
                    </button>
                    <a [routerLink]="['/search', keyword]" class="input-button search-button">
                        <i class="icon-size-16 icon icon-ic_fluent_search_16_regular"></i>
                    </a>
                </div>

                <!-- <div class="dropdown-menu" *ngIf="friends.length > 0 && currentRoute != 'search'">
                    <div class="list-item layout-horizontal align-center-center" *ngFor="let friend of friends">
                        <div class="text-body w-fill">{{friend.profile.display_name}}</div>
                        <button *ngIf="!friend.is_friend" type="button"
                            class="button-accent button-text-only w-hug py-5 px-10"
                            (click)="addFriend(friend.id)">Thêm</button>
                    </div>
                </div> -->
            </div>
        </div>
    </div>
    <div class="w-fill-column-4 in-mobile-w-fill">
        <div class="layout-horizontal gap-20 align-center-right in-mobile-align-center-space-evenly">
            <a [routerLink]="['/']"
                class="button-subtle button-icon-only {{(currentRoute == '')?'text-accent-default':'text-secondary'}}">
                <i *ngIf="(currentRoute == '')" class="icon-size-24 icon icon-ic_fluent_home_24_filled"></i>
                <i *ngIf="(currentRoute != '')" class="icon-size-24 icon icon-ic_fluent_home_24_regular"></i>
            </a>

            <a *ngIf="currentRoute == 'notification'" class="button-subtle button-icon-only text-accent-default">
                <i class="icon-size-24 icon icon-ic_fluent_alert_24_filled"></i>
            </a>

            <a (click)="diaLogNotification()" *ngIf="currentRoute != 'notification'"
                class="button-subtle button-icon-only {{(diaLogNoti)?'text-accent-default':'text-secondary'}}">
                <i *ngIf="(diaLogNoti)" class="icon-size-24 icon icon-ic_fluent_alert_24_filled"></i>
                <i *ngIf="(!diaLogNoti)" class="icon-size-24 icon icon-ic_fluent_alert_24_regular"></i>
            </a>
            <a [routerLink]="['/setting']"
                class="button-subtle button-icon-only {{(currentRoute == 'setting')?'text-accent-default':'text-secondary'}}">
                <i *ngIf="(currentRoute == 'setting')" class="icon-size-24 icon icon-ic_fluent_settings_24_filled"></i>
                <i *ngIf="(currentRoute != 'setting')" class="icon-size-24 icon icon-ic_fluent_settings_24_regular"></i>
            </a>
            <a [routerLink]="['/bookmark']"
                class="button-subtle button-icon-only {{(currentRoute == 'bookmark')?'text-accent-default':'text-secondary'}}">
                <i *ngIf="(currentRoute == 'bookmark')" class="icon-size-24 icon icon-ic_fluent_bookmark_24_filled"></i>
                <i *ngIf="(currentRoute != 'bookmark')"
                    class="icon-size-24 icon icon-ic_fluent_bookmark_24_regular"></i>
            </a>
            <a [routerLink]="['/chat']"
                class="button-subtle button-icon-only {{(currentRoute == 'chat')?'text-accent-default':'text-secondary'}}">
                <i *ngIf="(currentRoute == 'chat')" class="icon-size-24 icon icon-ic_fluent_chat_24_filled"></i>
                <i *ngIf="(currentRoute != 'chat')" class="icon-size-24 icon icon-ic_fluent_chat_24_regular"></i>
            </a>
            <a href="#" class="hide-in-desktop show-in-mobile button-subtle button-icon-only text-secondary">
                <i class="icon-size-24 icon icon-ic_fluent_navigation_24_regular"></i>
            </a>
        </div>
    </div>

    <div style="position: absolute; top: 50px; right: 100px; z-index: 40; width: 500px; height: 75vh;"
        *ngIf="diaLogNoti && currentRoute != 'notification'">
        <div class="layout-vertical h-fill rounded-8 border border-card-default solid-background-senary">

            <div class="layout-vertical gap-10 p-10 border-bottom border-card-default">
                <p class="text-subtitle text-primary">Thông báo</p>
                <div class="layout-horizontal align-center-space-between">
                    <div class="layout-horizontal gap-10">
                        <button type="button" class="button-accent button-text-only">Tất cả</button>
                        <button type="button" class="button-standard button-text-only">Chưa đọc</button>
                    </div>
                    <button type="button" class="button-standard button-text-only">Đánh dấu tất cả là đã
                        đọc</button>
                </div>
            </div>

            <div class="layout-vertical gap-10 p-10 h-fill overflow-scroll-vertical">

                <!-- Thông báo like bài viết -->
                <div class="list-item layout px-20 py-10 gap-20" *ngFor="let noti of notification">

                    <!-- Đánh dấu là thông báo chưa đọc -->
                    <div class="position-absolute accent-default rounded-2 start-0"
                        style="width: 3px; height: 30px; top: 13px;"></div>

                    <!-- Nội dung thông báo -->
                    <div class="layout-horizontal gap-10 w-fill align-center-center">
                        <img [src]="noti.target_user.profile.profile_photo" alt="" class="rounded-circle object-fit-cover" style="width: 35px; height: 35px;">
                        <div class="layout-vertical gap-5 w-fill">
                            <p class="text-body"><span class="text-body-strong">{{noti.content}}</span></p>
                            <p class="text-secondary text-caption">{{noti.created_at_time}} - {{noti.created_at_date}}</p>
                        </div>
                    </div>
                </div>
                <!-- Thông báo comment bài viết -->

            </div>

            <div class="p-10">
                <a [routerLink]="['/notification']" class="button-subtle button-text-only w-fill">Xem thêm</a>
            </div>
        </div>
    </div>
</header>


<div *ngIf="
currentRoute == '' || 
currentRoute == 'profile' || 
currentRoute == 'notification' || 
currentRoute == 'search' || 
currentRoute == 'friend-profile'
">
    <app-mini-chat *ngIf="conversation.length > 0"></app-mini-chat>
    <div *ngIf="conversation.length == 0">
        <div class="position-fixed layout-vertical align-center-center" style="z-index: 1; bottom: 10px; right: 10px;">
            <button type="button" class="button-accent button-icon-only layout align-center-center"
                style="border-radius: 999px !important; width: 50px !important; height: 50px !important;">
                <i class="icon-size-20 icon icon-ic_fluent_comment_edit_20_filled"></i>
            </button>
        </div>
    </div>
</div>