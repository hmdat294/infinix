<section class="gradient-background layout-vertical" style="height: 100vh;">

    <article class="layout-horizontal gap-20 px-20 w-fill h-fill overflow-hidden">
        <div class="w-fill-column-3 layout-vertical gap-20 py-20 overflow-scroll-vertical">
            <div class="layout-vertical card-background-default border border-card-default rounded-8"
                style="height: calc(100vh - 85px);">
                <div class="w-fill layout-horizontal align-center-space-between px-20 py-15 gap-15">
                    <div class="control search-control w-fill">
                        <input type="search" placeholder="Tìm kiếm" spellcheck="false">
                        <button type="button" class="input-button clear-content-button">
                            <i class="icon-size-16 icon icon-ic_fluent_dismiss_16_regular"></i>
                        </button>
                        <button type="button" class="input-button search-button">
                            <i class="icon-size-16 icon icon-ic_fluent_search_16_regular"></i>
                        </button>
                    </div>
                    <div class="w-hug">
                        <a href="" class="text-secondary"><i
                                class="icon-size-24 icon icon-ic_fluent_chat_add_24_regular"></i></a>
                    </div>
                    <div class="w-hug">
                        <a href="" class="text-secondary"><i
                                class="icon-size-24 icon icon-ic_fluent_more_horizontal_24_regular"></i></a>
                    </div>
                </div>
                <div class="overflow-scroll-vertical">
                    <div class="border-top" *ngFor="let friend of friends.data">
                        <button type="button" class="button-subtle w-fill gap-15 px-20 py-15"
                            (click)="MessageUser(friend.id)" style="cursor: pointer;">
                            <img src="assets/image/avatar.png" alt="" style="width: 35px; height: 35px;">
                            <p class="text-secondary text-body-strong w-fill layout">{{friend.profile.display_name}}</p>
                        </button>
                    </div>

                    <div class="w-fill layout-horizontal align-center-center px-20 py-15 border-top">
                        <a href="" class="link">Xem thêm</a>
                    </div>
                </div>

            </div>
        </div>
        <div class="{{(isVisible)?'w-fill-column-6':'w-fill-column-9'}} layout-vertical gap-20 py-20">
            <div class="layout-vertical card-background-default border border-card-default rounded-8"
                style="height: calc(100vh - 85px);">
                <div
                    class="h-hug w-fill layout-horizontal align-center-space-between px-20 py-15 gap-15 border-bottom border-card-default">
                    <div class="w-fill layout-horizontal gap-15 align-center-center">
                        <img src="assets/image/avatar.png" alt="" style="width: 35px; height: 35px;">
                        <p class="text-secondary text-body-strong w-fill">{{conversation.receive_user_name}}</p>
                    </div>
                    <div class="w-hug">
                        <a href="" class="accent-text-primary"><i
                                class="icon-size-24 icon icon-ic_fluent_call_24_filled"></i></a>
                    </div>
                    <div class="w-hug">
                        <a href="" class="accent-text-primary"><i
                                class="icon-size-24 icon icon-ic_fluent_video_24_filled"></i></a>
                    </div>
                    <div class="w-hug">
                        <a href="" class="accent-text-primary"><i
                                class="icon-size-24 icon icon-ic_fluent_more_circle_24_filled"></i></a>
                    </div>
                    <div class="w-hug" (click)="toggleBoxchat()">
                        <a class="accent-text-primary">
                            <i *ngIf="!isVisible"
                                class="icon-size-24 icon icon-ic_fluent_panel_left_contract_24_filled"></i>
                            <i *ngIf="isVisible"
                                class="icon-size-24 icon icon-ic_fluent_panel_right_contract_24_filled"></i>
                        </a>
                    </div>
                </div>
                <div #scrollBox class="h-fill w-fill box-chat">

                    <div *ngFor="let msg of conversation.messages; let i = index;" [attr.id]="'item-' + msg.id">

                        <div class="position-fixed top-0 start-0" *ngIf="idDialog == msg.id"
                            style="width: 100%; height: 100vh; z-index: 10; background-color: rgba(0, 0, 0, 0.2);">
                            <div class="dialog-panel position-absolute top-50 start-50 translate-middle"
                                style="min-width: 500px;">
                                <div
                                    class="solid-background-senary rounded-6 p-10 gap-10 layout-vertical border border-card-default">
                                    <div class="border-bottom pb-10 layout-horizontal align-center-space-between">
                                        <p class="text-subtitle">Chi tiết tin nhắn</p>
                                        <button type="button" class="button-subtle button-icon-only"
                                            (click)="toggleDialog(0)">
                                            <i class="icon-size-16 icon icon-ic_fluent_dismiss_16_regular"></i>
                                        </button>
                                    </div>
                                    <div>

                                        <div class="w-fill layout align-top-right" *ngIf="(user.id == msg.user_id)" style="max-height: 65vh;" class="overflow-scroll-vertical">
                                            <div class="layout-horizontal gap-15 p-5 align-top-right">
                                                <div style="max-width: calc(100% - 100px);">
                                                    <p class="text-tertiary text-caption mb-5 layout align-top-right">
                                                        {{msg.created_at_time}} - {{msg.updated_at_date}}
                                                    </p>
                                                    <div class="layout align-center-right" *ngIf="msg.is_recalled == 0">

                                                        <div>
                                                            <div>
                                                                <div *ngIf="msg.reply_to_message_id">
                                                                    <div *ngIf="getReply(msg.reply_to_message_id).is_recalled == 0"
                                                                        style="border-right: 3px solid #005FB8E6;">

                                                                        <p class="px-10 py-5 my-5 text-secondary button-subtle"
                                                                            (click)="scrollToElement(msg.reply_to_message_id)">
                                                                            <img *ngIf="getReply(msg.reply_to_message_id).images"
                                                                                src="{{getReply(msg.reply_to_message_id).images.path}}"
                                                                                alt="Image" height="50px"
                                                                                class="m-2 rounded-4">

                                                                            <span style="white-space: pre-line;">
                                                                                {{getReply(msg.reply_to_message_id
                                                                                ).content}}
                                                                            </span>
                                                                        </p>
                                                                    </div>
                                                                    <div *ngIf="getReply(msg.reply_to_message_id).is_recalled == 1"
                                                                        style="border-right: 3px solid #005FB8E6;">

                                                                        <p class="px-10 py-5 my-5 text-secondary">
                                                                            <small>Tin nhắn đã được thu hồi</small>
                                                                        </p>

                                                                    </div>
                                                                </div>

                                                                <div class="layout w-fill gradient-background p-10 rounded-top-8"
                                                                    *ngIf="msg.medias.length>0">
                                                                    <div
                                                                        class="w-fill h-fill {{(msg.medias.length<6)?'layout-3-'+msg.medias.length:(msg.medias.length%2==0)?'layout-3-6':'layout-3-5'}}">
                                                                        <div class="w-fill h-fill rounded-6"
                                                                            *ngFor="let img of msg.medias">
                                                                            <img class="w-fill object-fit-cover object-position-center"
                                                                                [src]="getPathImg(img)" alt="Image">
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <p style="background-color: #005FB8E6; color: white; white-space: pre-line;"
                                                                    class="border border-card-default px-15 py-10 {{(msg.medias.length>0)?'rounded-bottom-8':'rounded-8'}}">
                                                                    {{ msg.content }}
                                                                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Fugit animi in soluta maiores! Provident cupiditate in obcaecati fuga dolore, quam magnam aliquam earum culpa perspiciatis repudiandae soluta, vero ex deleniti?
                                                                </p>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <img src="assets/image/avatar.png" alt=""
                                                    style="width: 35px; height: 35px;">
                                            </div>
                                        </div>

                                        <div class="w-fill layout align-top-left" *ngIf="(user.id != msg.user_id)">
                                            <div class="layout-horizontal gap-15 p-5">
                                                <img src="assets/image/avatar.png" alt=""
                                                    style="width: 35px; height: 35px;">
                                                <div>
                                                    <p class="text-tertiary text-caption mb-5 layout align-top-left">
                                                        {{msg.created_at_time}} - {{msg.updated_at_date}}
                                                    </p>
                                                    <div class="mess-hover layout align-center-left"
                                                        *ngIf="msg.is_recalled == 0">
                                                        <div>
                                                            <div>
                                                                <div *ngIf="msg.reply_to_message_id">
                                                                    <div *ngIf="getReply(msg.reply_to_message_id).is_recalled == 0"
                                                                        style="border-left: 3px solid #0000001F;">

                                                                        <p class="px-10 py-5 my-5 text-secondary"
                                                                            (click)="scrollToElement(msg.reply_to_message_id)">
                                                                            <img *ngIf="getReply(msg.reply_to_message_id).images"
                                                                                src="{{getReply(msg.reply_to_message_id).images.path}}"
                                                                                alt="Image" height="50px"
                                                                                class="m-2 rounded-4">

                                                                            <span style="white-space: pre-line;">
                                                                                {{getReply(msg.reply_to_message_id
                                                                                ).content}}
                                                                            </span>
                                                                        </p>
                                                                    </div>
                                                                    <div *ngIf="getReply(msg.reply_to_message_id).is_recalled == 1"
                                                                        style="border-left: 3px solid #0000001F;">

                                                                        <p class="px-10 py-5 my-5 text-secondary">
                                                                            <small>Tin nhắn đã được thu hồi</small>
                                                                        </p>

                                                                    </div>
                                                                </div>

                                                                <div class="layout w-fill h-fill"
                                                                    *ngIf="msg.medias.length>0">
                                                                    <div style="max-height: 60vh;"
                                                                        class="w-fill h-fill {{(msg.medias.length<6)?'layout-3-'+msg.medias.length:(msg.medias.length%2==0)?'layout-3-6':'layout-3-5'}}">
                                                                        <div class="w-fill h-fill rounded-6 overflow-hidden"
                                                                            *ngFor="let img of msg.medias">
                                                                            <img class="w-fill h-fill object-fit-cover object-position-center"
                                                                                [src]="getPathImg(img)" alt="Image">
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <p style="white-space: pre-line;"
                                                                    class="card-background-default border border-card-default px-15 py-10 {{(msg.medias.length>0)?'rounded-bottom-8':'rounded-8'}}">
                                                                    {{ msg.content }}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div *ngIf="msg.is_edited == 1" class="border-top pt-10">

                                        <p style="font-size: 0.9em;"
                                            class="text-secondary text-{{(user.id == msg.user_id)?'right':'left'}}">
                                            Đã sửa - {{msg.updated_at_date}} - {{msg.updated_at_time}}
                                        </p>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="layout-horizontal align-center-center mt-10" *ngIf="isDifferentDate(i)">
                            <div class="w-hug px-10 rounded-pill" style="background-color: rgba(245, 245, 245);">
                                <small>{{msg.created_at_date}}</small>
                            </div>
                        </div>

                        <div class="w-fill layout align-top-right" *ngIf="(user.id == msg.user_id)">
                            <div class="layout-horizontal gap-15 p-20">
                                <div>
                                    <p class="text-tertiary text-caption mb-5 layout align-top-right">{{
                                        msg.created_at_time }}
                                    </p>
                                    <div class="mess-hover layout align-top-right" *ngIf="msg.is_recalled == 0">
                                        <div class="mess-menu layout-vertical mx-15 gap-5 p-5 acrylic-background-default blur-acrylic border border-card-default rounded-8">
                                            <div class="list-item layout-horizontal gap-10 align-center-left" (click)="toggleDialog(msg.id)">
                                                <i class="icon-size-20 accent-text-primary icon icon-ic_fluent_more_horizontal_20_regular"></i>
                                                <p class="text-body text-primary">Xem chi tiết</p>
                                            </div>
                                            <div class="list-item layout-horizontal gap-10 align-center-left">
                                                <i class="icon-size-20 accent-text-primary icon icon-ic_fluent_copy_20_regular"></i>
                                                <p class="text-body text-primary">Sao chép</p>
                                            </div>
                                            <div class="list-item layout-horizontal gap-10 align-center-left" (click)="onReply(msg.id)">
                                                <i class="icon-size-20 accent-text-primary icon icon-ic_fluent_arrow_reply_20_regular"></i>
                                                <p class="text-body text-primary">Phản hổi</p>
                                            </div>
                                            <div class="list-item layout-horizontal gap-10 align-center-left" (click)="editMessage(msg.id)">
                                                <i class="icon-size-20 accent-text-primary icon icon-ic_fluent_edit_20_regular"></i>
                                                <p class="text-body text-primary">Chỉnh sửa</p>
                                            </div>
                                            <div class="list-item layout-horizontal gap-10 align-center-left" (click)="recallMessage(msg.id)">
                                                <i class="icon-size-20 accent-text-primary icon icon-ic_fluent_arrow_counterclockwise_20_regular"></i>
                                                <p class="text-body text-primary">Thu hồi</p>
                                            </div>

                                            <!-- <button type="button" (click)="toggleDialog(msg.id)"
                                                class="btn-dialog button-subtle button-icon-only">
                                                <i
                                                    class="icon-size-20 icon icon-ic_fluent_more_horizontal_20_filled"></i>
                                            </button>
                                            <button type="button" (click)="onReply(msg.id)"
                                                class="button-subtle button-icon-only">
                                                <i class="icon-size-20 icon icon-ic_fluent_arrow_reply_20_regular"></i>
                                            </button>
                                            <button type="button" (click)="recallMessage(msg.id)"
                                                class="button-subtle button-icon-only">
                                                <i
                                                    class="icon-size-20 icon icon-ic_fluent_arrow_counterclockwise_20_regular"></i>
                                            </button>
                                            <button type="button" (click)="editMessage(msg.id)"
                                                class="button-subtle button-icon-only">
                                                <i class="icon-size-20 icon icon-ic_fluent_edit_20_regular"></i>
                                            </button> -->

                                        </div>
                                        <div>
                                            <div>
                                                <div *ngIf="msg.reply_to_message_id">
                                                    <div *ngIf="getReply(msg.reply_to_message_id).is_recalled == 0"
                                                        style="border-right: 3px solid #005FB8E6;">

                                                        <p class="px-10 py-5 my-5 text-secondary button-subtle"
                                                            (click)="scrollToElement(msg.reply_to_message_id)">
                                                            <img *ngIf="getReply(msg.reply_to_message_id).images"
                                                                src="{{getReply(msg.reply_to_message_id).images.path}}"
                                                                alt="Image" height="50px" class="m-2 rounded-4">

                                                            <span style="white-space: pre-line;">
                                                                {{getReply(msg.reply_to_message_id
                                                                ).content}}
                                                            </span>
                                                        </p>
                                                    </div>
                                                    <div *ngIf="getReply(msg.reply_to_message_id).is_recalled == 1"
                                                        style="border-right: 3px solid #005FB8E6;">

                                                        <p class="px-10 py-5 my-5 text-secondary">
                                                            <small>Tin nhắn đã được thu hồi</small>
                                                        </p>

                                                    </div>
                                                </div>
                                                <div class="layout w-fill gradient-background p-10 rounded-top-8"
                                                    *ngIf="msg.medias.length>0">
                                                    <div style="max-width: 500px;"
                                                        class="w-fill {{(msg.medias.length<6)?'layout-'+msg.medias.length:(msg.medias.length%2==0)?'layout-6':'layout-5'}}">
                                                        <div class="w-fill h-fill rounded-6 overflow-hidden"
                                                            *ngFor="let img of msg.medias">
                                                            <img class="w-fill h-fill object-fit-cover object-position-center"
                                                                [src]="getPathImg(img)" alt="Image">
                                                        </div>
                                                    </div>
                                                </div>

                                                <p style="background-color: #005FB8E6; color: white; white-space: pre-line;"
                                                    class="mess-child border border-card-default px-15 py-10 {{(msg.medias.length>0)?'rounded-bottom-8':'rounded-8'}}">
                                                    {{ msg.content }}
                                                </p>

                                                <p *ngIf="msg.is_edited == 1" style="font-size: 0.9em;"
                                                    class="text-secondary text-right">
                                                    Đã sửa
                                                </p>
                                            </div>
                                        </div>

                                    </div>


                                    <div *ngIf="msg.is_recalled == 1" class="layout align-center-left">
                                        <div *ngIf="msg.showUndoBtn" class="layout mx-15">
                                            <button type="button" (click)="undoRecall(msg.id)" class="button-subtle">
                                                Hoàn tác ({{msg.countdown}})
                                            </button>
                                        </div>
                                        <p
                                            class="text-on-accent-disabled accent-disabled border border-card-default px-15 py-10 rounded-8">
                                            <i>*Tin nhắn đã được thu hồi</i>
                                        </p>
                                    </div>
                                </div>

                                <img src="assets/image/avatar.png" alt="" style="width: 35px; height: 35px;">

                            </div>
                        </div>

                        <div class="w-fill layout align-top-left" *ngIf="(user.id != msg.user_id)">
                            <div class="layout-horizontal gap-15 p-20">
                                <img src="assets/image/avatar.png" alt="" style="width: 35px; height: 35px;">
                                <div>
                                    <p class="text-tertiary text-caption mb-5 layout align-top-left">{{
                                        msg.created_at_time }}
                                    </p>
                                    <div class="mess-hover layout align-top-left" *ngIf="msg.is_recalled == 0">
                                        <div>
                                            <div>
                                                <div *ngIf="msg.reply_to_message_id">
                                                    <div *ngIf="getReply(msg.reply_to_message_id).is_recalled == 0"
                                                        style="border-left: 3px solid #0000001F;">

                                                        <p class="px-10 py-5 my-5 text-secondary"
                                                            (click)="scrollToElement(msg.reply_to_message_id)">
                                                            <img *ngIf="getReply(msg.reply_to_message_id).images"
                                                                src="{{getReply(msg.reply_to_message_id).images.path}}"
                                                                alt="Image" height="50px" class="m-2 rounded-4">

                                                            <span style="white-space: pre-line;">
                                                                {{getReply(msg.reply_to_message_id
                                                                ).content}}
                                                            </span>
                                                        </p>
                                                    </div>
                                                    <div *ngIf="getReply(msg.reply_to_message_id).is_recalled == 1"
                                                        style="border-left: 3px solid #0000001F;">

                                                        <p class="px-10 py-5 my-5 text-secondary">
                                                            <small>Tin nhắn đã được thu hồi</small>
                                                        </p>

                                                    </div>
                                                </div>

                                                <div class="layout w-fill gradient-background p-10 rounded-top-8"
                                                    *ngIf="msg.medias.length>0">
                                                    <div style="max-width: 500px;"
                                                        class="w-fill {{(msg.medias.length<6)?'layout-'+msg.medias.length:(msg.medias.length%2==0)?'layout-6':'layout-5'}}">
                                                        <div class="w-fill h-fill rounded-6 overflow-hidden"
                                                            *ngFor="let img of msg.medias">
                                                            <img class="w-fill h-fill object-fit-cover object-position-center"
                                                                [src]="getPathImg(img)" alt="Image">
                                                        </div>
                                                    </div>
                                                </div>

                                                <p style="white-space: pre-line;"
                                                    class="mess-child card-background-default border border-card-default px-15 py-10 {{(msg.medias.length>0)?'rounded-bottom-8':'rounded-8'}}">
                                                    {{ msg.content }}
                                                </p>

                                                <p *ngIf="msg.is_edited == 1" style="font-size: 0.9em;"
                                                    class="text-secondary text-left">
                                                    Đã sửa
                                                </p>
                                            </div>
                                        </div>

                                        <div class="mess-menu mx-15 layout-vertical mx-15 gap-5 p-5 acrylic-background-default blur-acrylic border border-card-default rounded-8">
                                            <div class="list-item layout-horizontal gap-10 align-center-left" (click)="toggleDialog(msg.id)">
                                                <i class="icon-size-20 accent-text-primary icon icon-ic_fluent_more_horizontal_20_regular"></i>
                                                <p class="text-body text-primary">Xem chi tiết</p>
                                            </div>
                                            <div class="list-item layout-horizontal gap-10 align-center-left">
                                                <i class="icon-size-20 accent-text-primary icon icon-ic_fluent_copy_20_regular"></i>
                                                <p class="text-body text-primary">Sao chép</p>
                                            </div>
                                            <div class="list-item layout-horizontal gap-10 align-center-left" (click)="onReply(msg.id)">
                                                <i class="icon-size-20 accent-text-primary icon icon-ic_fluent_arrow_reply_20_regular"></i>
                                                <p class="text-body text-primary">Phản hổi</p>
                                            </div>
                                        </div>
                                    </div>


                                    <div *ngIf="msg.is_recalled == 1" class="layout align-center-left">
                                        <p
                                            class="border border-card-default card-background-default px-15 py-10 rounded-8 text-secondary">
                                            Tin nhắn đã được thu hồi
                                        </p>
                                        <div *ngIf="msg.showUndoBtn" class="layout mx-15">
                                            <button type="button" (click)="undoRecall(msg.id)" class="button-subtle">
                                                Hoàn tác ({{msg.countdown}})
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="h-hug">
                    <form class="border-top" (ngSubmit)="sendMessage(frm.value)" #frm="ngForm"
                        enctype="multipart/form-data">

                        <div *ngIf="previewReply" class="p-10 position-relative">
                            <div style="border-left: 3px solid #005FB8E6;" class="p-10">
                                <img *ngIf="previewReply.medias.length > 0" src="{{previewReply.medias[0].path}}"
                                    alt="Image" height="50px" class="rounded-4">
                                <span style="white-space: pre-line;">
                                    {{previewReply.content}}
                                </span>
                            </div>
                            <button type="button" (click)="onCancelReply()"
                                class="button-subtle button-icon-only position-absolute top-0 end-0 m-5">
                                <i class="icon-size-16 icon icon-ic_fluent_dismiss_16_regular"></i>
                            </button>
                        </div>

                        <div *ngIf="previewUrls.length > 0" class="p-10 position-relative">
                            <div class="layout gap-10">
                                <div *ngFor="let previewUrl of previewUrls; let i = index" class="position-relative">
                                    <img [src]="previewUrl" alt="Image preview" height="100px" class="rounded-4">
                                    <button type="button" (click)="removeImage(i)"
                                        class="button-standard button-icon-only position-absolute top-0 end-0">
                                        <i class="icon-size-16 icon icon-ic_fluent_dismiss_16_regular"></i>
                                    </button>
                                </div>
                            </div>
                            <button type="button" (click)="onCancelSendImg()"
                                class="button-subtle button-icon-only position-absolute top-0 end-0 m-5">
                                <i class="icon-size-16 icon icon-ic_fluent_dismiss_16_regular"></i>
                            </button>
                        </div>

                        <div class="w-fill h-hug layout px-20 py-15 gap-15">
                            <img src="assets/image/avatar.png" alt="" style="width: 35px; height: 35px;">

                            <div class="control w-fill h-hug" style="padding: 0;">
                                <input type="hidden" name="id" ngModel [(ngModel)]="conversation.id">

                                <textarea [(ngModel)]="content" name="content" ngModel
                                    class="textarea-chat control text-area-control w-fill"
                                    (keydown)="handleKeydown($event, frm.value)" #textArea spellcheck="false"
                                    required></textarea>

                                <button type="button" class="input-button">
                                    <i class="icon-size-16 icon icon-ic_fluent_mic_16_regular"></i>
                                </button>

                                <label style="cursor: pointer;" class="input-button">
                                    <i class="icon-size-16 icon icon-ic_fluent_image_16_regular"></i>
                                    <input type="file" [ngModel]="fileInput" (change)="onFileSelected($event)"
                                        accept="image/*" multiple style="display: none;">
                                </label>
                                <button type="button" class="input-button">
                                    <i class="icon-size-16 icon icon-ic_fluent_emoji_16_regular"></i>
                                </button>
                            </div>

                            <button type="submit" class="button-accent button-text-with-icon"
                                *ngIf="(!frm.invalid && !spaceCheck.test(frm.value.content)) || previewUrls.length > 0">
                                Send
                                <i class="icon-size-16 icon icon-ic_fluent_send_16_filled"></i>
                            </button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
        <div
            class="{{(isVisible)?'display-flex':'display-none'}} w-fill-column-3 layout-vertical gap-20 py-20 overflow-scroll-vertical">
            <div class="layout-vertical card-background-default border rounded-8 align-center-center py-20">
                <img src="assets/image/avatar.png" alt="" class="mb-15" style="width: 100px; height: 100px;">
                <p class="text-primary text-body">Châu Thành Cường</p>
                <p class="text-primary text-caption">Chick2004</p>
            </div>

            <div class="layout-vertical card-background-default border rounded-8">
                <div class="accordion">
                    <div class="accordion-item">
                        <div class="a-accordion-header layout-horizontal gap-15 px-20 py-15 align-center-center text-accent-default"
                            style="cursor: pointer;">
                            <i *ngIf="!showBoxSearch" class="icon-size-20 icon icon-ic_fluent_search_20_regular"></i>
                            <p class="text-primary text-body w-fill">Search message</p>
                            <i *ngIf="showBoxSearch" class="icon-size-20 icon icon-ic_fluent_dismiss_20_regular"></i>
                        </div>
                        <div class="accordion-panel accordion-panel-search-chat">
                            <div class="layout-vertical p-5 gap-15 px-15 py-10">

                                <div class="control search-control search-control-chat w-fill">
                                    <input type="search w-fill" (input)="searchMessage()" [(ngModel)]="keywordSearch"
                                        placeholder="Tìm kiếm" spellcheck="false" required="">
                                    <button type="button" class="input-button clear-content-button">
                                        <i class="icon-size-16 icon icon-ic_fluent_dismiss_16_regular"></i>
                                    </button>
                                    <button type="button" class="input-button search-button" (click)="searchMessage()">
                                        <i class="icon-size-16 icon icon-ic_fluent_search_16_regular"></i>
                                    </button>
                                </div>

                                <div class="layout-vertical gap-5" *ngIf="valueSearch.length > 0">

                                    <div *ngFor="let message of valueSearch">
                                        <div style="cursor: pointer;" (click)="scrollToElement(message.id)"
                                            class="layout-horizontal align-center-left gap-15 px-15 py-15 list-item">
                                            <div>
                                                <img src="assets/image/avatar.png" alt=""
                                                    style="width: 35px; height: 35px;">
                                            </div>
                                            <div class="w-fill">
                                                <p class="text-body-strong">Châu Thành Cường</p>
                                                <p class="text-body">{{message.content}}</p>
                                                <p class="text-caption">{{message.created_at_date}} -
                                                    {{message.created_at_time}}</p>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <a href=""
                    class="layout-horizontal gap-15 px-20 py-15 border-top align-center-center text-accent-default">
                    <i class="icon-size-20 icon icon-ic_fluent_alert_20_regular"></i>
                    <p class="text-primary text-body w-fill">Notification</p>
                </a>
                <a href=""
                    class="layout-horizontal gap-15 px-20 py-15 border-top align-center-center text-accent-default">
                    <i class="icon-size-20 icon icon-ic_fluent_pin_20_regular"></i>
                    <p class="text-primary text-body w-fill">Pinned messages</p>
                </a>

            </div>
            <div class="card-background-default border rounded-8 p-10">

                <div class="" style="display: grid; grid-template-columns: repeat(3, 1fr); gap:10px;">

                    <a href="" class="">
                        <img src="assets/image/hinh.jpg" alt="" class="rounded-4 border w-fill">
                    </a>

                    <a href="" class="">
                        <img src="assets/image/hinh.jpg" alt="" class="rounded-4 border w-fill">
                    </a>

                    <a href="" class="">
                        <img src="assets/image/hinh.jpg" alt="" class="rounded-4 border w-fill">
                    </a>

                    <a href="" class="">
                        <img src="assets/image/hinh.jpg" alt="" class="rounded-4 border w-fill">
                    </a>

                    <a href="" class="">
                        <img src="assets/image/hinh.jpg" alt="" class="rounded-4 border w-fill">
                    </a>

                    <a href="" class="">
                        <img src="assets/image/hinh.jpg" alt="" class="rounded-4 border w-fill">
                    </a>

                    <a href="" class="">
                        <img src="assets/image/hinh.jpg" alt="" class="rounded-4 border w-fill">
                    </a>

                </div>
            </div>
        </div>
    </article>

</section>